<%= flash[:notice] %>
<%= flash[:warning] %>

<% if @current_user.nil? %>
  <%= link_to new_user_path do %>Sign Up<% end %>
  <%= link_to new_sessions_path do %>Login<% end %>
    
<% else %>
    <%= link_to('Logout', {:controller => "sessions", :action => 'destroy'}, :method => :delete) %>

  <% @posts.each do |post| %>
    <div id="post-<%= post.id %>">
      <%= post.formatted_message %>
      <%= post.posted_at %> <br>
      <%= post.user.username if !!post.user_id %>
      <%= link_to('edit', {:controller => "posts", :action => 'edit', :id => post.id }, :method => :get) if post.editable?(session[:current_user_id]) %>
      <%= link_to('delete', {:controller => "posts", :action => 'destroy', :id => post.id }, :method => :delete) if post.owned_by?(session[:current_user_id]) %>
    </div>
  <% end %>

  <%= link_to new_post_path do %>New post<% end %>

<% end %>
